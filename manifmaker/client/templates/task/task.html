<template name="insertTaskForm">




    {{# autoForm collection="Tasks" id="insertTaskForm" type="insert"}}
        <fieldset>
            <legend>Add a Task</legend>
            {{> afQuickField name='name'}}
            {{> afQuickField name='description'}}
            {{> afQuickField name="teamId"}}
            {{> afQuickField name="placeId"}}
            {{> afQuickField name="liveEventMasterId"}}
            {{> afQuickField name="masterId"}}
        </fieldset>

        <button type="submit" class="btn btn-primary">Insert</button>
        <button type="reset" class="btn btn-default">Reset</button>
    {{/autoForm}}
</template>

<template name="updateTaskForm">

    {{# autoForm collection="Tasks" doc=this id="updateTaskForm" type="update"}}
        <fieldset>
            <legend>Update Task {{this.name}}</legend>

            <p>equipments</p>

            {{#each equipments}}
                {{equipmentName}}
                {{> afQuickField name=autoformNameForQuantity}}
                {{> afQuickField name=autoformNameForEquipmentId}}
            {{/each}}


            <!--{{> afQuickField name='name'}}-->
            <!--{{> afQuickField name='description'}}-->
            <!--{{> afQuickField name="teamId"}}-->
            <!--{{> afQuickField name="placeId"}}-->
            <!--{{> afQuickField name="liveEventMasterId"}}-->
            <!--{{> afQuickField name="masterId"}}-->



            <!--{{> afQuickField name="equipments"}}-->


            <!--{{> afQuickField name="timeSlots"}}-->
        </fieldset>
        <button type="submit" class="btn btn-primary">Update</button>
        {{#if isInRole RolesEnum.TASKDELETE}}
            {{#quickRemoveButton class="btn btn-default" collection="Tasks" _id=this._id}}Delete {{this.name}}{{/quickRemoveButton}}
        {{/if}}
    {{/autoForm}}

    <!--
    <div class="row">

        <ul class="collapsible popout" data-collapsible="accordion">
            <li>
                <div class="collapsible-header"><i class="material-icons">comment</i>Time slot validation comments</div>
                <div class="collapsible-body">
                    <ul class="collection">
                        {{#each timeSlotValidation.comments}}
                            <li class="collection-item">{{author}} update time slot validation from <b>{{displayValidationState stateBefore}}</b> to <b>{{displayValidationState stateAfter}}</b> on {{displayDateTime creationDate}} with "{{content}}"</li>
                        {{else}}
                            <li class="collection-item">There are not comments right now but with luck there will be yours soon.</li>
                        {{/each}}
                    </ul>
                </div>
            </li>
        </ul>
        {{#if displayTextArea 'ASSIGNMENTVALIDATION' timeSlotValidation.currentState}}
            <textarea id="time-slot-validation-new-comment" placeholder="You can type a new comment for time slot validation" class="new-comment-textarea materialize-textarea"></textarea>
        {{/if}}

        {{#if equals timeSlotValidation.currentState "OPEN"}}
            <a class="waves-effect waves-light btn-large" href="/task/validation/time-slot/{{this._id}}/to-be-validated"><i class="material-icons left">schedule</i>Time slots validation : ask for validation</a>
        {{/if}}
        {{#if isInRole RolesEnum.ASSIGNMENTVALIDATION}}
            {{#if equals timeSlotValidation.currentState "TOBEVALIDATED"}}
                <a class="waves-effect waves-light btn-large" href="/task/validation/time-slot/{{this._id}}/refuse"><i class="material-icons left">schedule</i>Time slots validation : refuse</a>
                <a class="waves-effect waves-light btn-large" href="/task/validation/time-slot/{{this._id}}/ready"><i class="material-icons left">schedule</i>Time slots validation : set ready to assignment</a>
            {{/if}}
        {{else}}
            {{#if equals timeSlotValidation.currentState "TOBEVALIDATED"}}
                <div class="chip">In validation</div>
            {{/if}}
        {{/if}}
        {{#if equals timeSlotValidation.currentState "REFUSED"}}
            <a class="waves-effect waves-light btn-large" href="/task/validation/time-slot/{{this._id}}/to-be-validated"><i class="material-icons left">schedule</i>Time slots validation : ask for validation</a>
        {{/if}}
        {{#if isInRole RolesEnum.ASSIGNMENTVALIDATION}}
            {{#if equals timeSlotValidation.currentState "READY"}}
                <a class="waves-effect waves-light btn-large" href="/task/validation/time-slot/{{this._id}}/refuse"><i class="material-icons left">schedule</i>Time slots validation : refuse</a>
            {{/if}}
        {{else}}
            {{#if equals timeSlotValidation.currentState "READY"}}
                <div class="chip">Ready for assignment</div>
            {{/if}}
        {{/if}}
    </div>


    <div class="row">

        <ul class="collapsible popout" data-collapsible="accordion">
            <li>
                <div class="collapsible-header"><i class="material-icons">comment</i>Access pass validation comments</div>
                <div class="collapsible-body">
                    <ul class="collection">
                        {{#each accessPassValidation.comments}}
                            <li class="collection-item">{{author}} update access pass validation from <b>{{displayValidationState stateBefore}}</b> to <b>{{displayValidationState stateAfter}}</b> on {{displayDateTime creationDate}} with "{{content}}"</li>
                        {{else}}
                            <li class="collection-item">There are not comments right now but with luck there will be yours soon.</li>
                        {{/each}}
                    </ul>
                </div>
            </li>
        </ul>
        {{#if displayTextArea 'ACCESSPASSVALIDATION' accessPassValidation.currentState}}
            <textarea id="access-pass-validation-new-comment" placeholder="You can type a new comment for access pass validation" class="new-comment-textarea materialize-textarea"></textarea>
        {{/if}}

        {{#if equals accessPassValidation.currentState "OPEN"}}
            <a class="waves-effect waves-light btn-large" href="/task/validation/access-pass/{{this._id}}/to-be-validated"><i class="material-icons left">cloud</i>Access pass validation : ask for validation</a>
        {{/if}}
        {{#if isInRole RolesEnum.ACCESSPASSVALIDATION}}
            {{#if equals accessPassValidation.currentState "TOBEVALIDATED"}}
                <a class="waves-effect waves-light btn-large" href="/task/validation/access-pass/{{this._id}}/refuse"><i class="material-icons left">cloud</i>Access pass validation : refuse</a>
                <a class="waves-effect waves-light btn-large" href="/task/validation/access-pass/{{this._id}}/ready"><i class="material-icons left">cloud</i>Access pass validation : close</a>
            {{/if}}
        {{else}}
            {{#if equals accessPassValidation.currentState "TOBEVALIDATED"}}
                <div class="chip">In validation</div>
            {{/if}}
        {{/if}}
        {{#if equals accessPassValidation.currentState "REFUSED"}}
            <a class="waves-effect waves-light btn-large" href="/task/validation/access-pass/{{this._id}}/to-be-validated"><i class="material-icons left">cloud</i>Access pass validation : ask for validation</a>
        {{/if}}
        {{#if isInRole RolesEnum.ACCESSPASSVALIDATION}}
            {{#if equals accessPassValidation.currentState "READY"}}
                <a class="waves-effect waves-light btn-large" href="/task/validation/access-pass/{{this._id}}/refuse"><i class="material-icons left">cloud</i>Access pass validation : refuse</a>
            {{/if}}
        {{else}}
            {{#if equals accessPassValidation.currentState "READY"}}
                <div class="chip">Closed</div>
            {{/if}}
        {{/if}}
    </div>


    <div class="row">

        <ul class="collapsible popout" data-collapsible="accordion">
            <li>
                <div class="collapsible-header"><i class="material-icons">comment</i>Equipment validation comments</div>
                <div class="collapsible-body">
                    <ul class="collection">
                        {{#each equipmentValidation.comments}}
                            <li class="collection-item">{{author}} update equipment validation from <b>{{displayValidationState stateBefore}}</b> to <b>{{displayValidationState stateAfter}}</b> on {{displayDateTime creationDate}} with "{{content}}"</li>
                        {{else}}
                            <li class="collection-item">There are not comments right now but with luck there will be yours soon.</li>
                        {{/each}}
                    </ul>
                </div>
            </li>
        </ul>
        {{#if displayTextArea 'EQUIPMENTVALIDATION' equipmentValidation.currentState}}
            <textarea id="equipment-validation-new-comment" placeholder="You can type a new comment for equipment validation" class="new-comment-textarea materialize-textarea"></textarea>
        {{/if}}

        {{#if equals equipmentValidation.currentState "OPEN"}}
            <a class="waves-effect waves-light btn-large" href="/task/validation/equipment/{{this._id}}/to-be-validated"><i class="material-icons left">settings</i>Equipments validation : ask for validation</a>
        {{/if}}
        {{#if isInRole RolesEnum.EQUIPMENTVALIDATION}}
            {{#if equals equipmentValidation.currentState "TOBEVALIDATED"}}
                <a class="waves-effect waves-light btn-large" href="/task/validation/equipment/{{this._id}}/refuse"><i class="material-icons left">settings</i>Equipments validation : refuse</a>
                <a class="waves-effect waves-light btn-large" href="/task/validation/equipment/{{this._id}}/ready"><i class="material-icons left">settings</i>Equipments validation : close</a>
            {{/if}}
        {{else}}
            {{#if equals equipmentValidation.currentState "TOBEVALIDATED"}}
                <div class="chip">In validation</div>
            {{/if}}
        {{/if}}
        {{#if equals equipmentValidation.currentState "REFUSED"}}
            <a class="waves-effect waves-light btn-large" href="/task/validation/equipment/{{this._id}}/to-be-validated"><i class="material-icons left">settings</i>Equipments validation : ask for validation</a>
        {{/if}}
        {{#if isInRole RolesEnum.EQUIPMENTVALIDATION}}
            {{#if equals equipmentValidation.currentState "READY"}}
                <a class="waves-effect waves-light btn-large" href="/task/validation/equipment/{{this._id}}/refuse"><i class="material-icons left">settings</i>Equipments validation : refuse</a>
            {{/if}}
        {{else}}
            {{#if equals equipmentValidation.currentState "READY"}}
                <div class="chip">Closed</div>
            {{/if}}
        {{/if}}
    </div>
    -->
</template>


<template name="readTaskForm">

    {{# autoForm collection="Tasks" doc=this id="readTaskForm" type="readonly"}}
        <fieldset>
            <legend>Update Task {{this.name}}</legend>
            {{> afQuickField name='name'}}
            {{> afQuickField name='description'}}
            {{> afQuickField name="teamId"}}
            {{> afQuickField name="placeId"}}
            {{> afQuickField name="liveEventMasterId"}}
            {{> afQuickField name="masterId"}}
            {{> afQuickField name="timeSlots"}}
        </fieldset>
    {{/autoForm}}
</template>